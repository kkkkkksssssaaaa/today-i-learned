- [x]  오늘 하루 공부했던 것에 대해 `정리하기`
- [x]  중요한 것을 `잊지않기`

# 🚩 Today I Learned

---

## 📚 정리하기

- JPA 프로그래밍 요약 정리
- 스프링의 Validate

---

## 🏷 잊지않기

- 스프링에서 validation 을 사용할 때
    - 파라미터나 필드에 대한 검증을 쉽게 할 수 있는 API 들
    - 특히 @Valid 와 @Validated 로 크게 검증 할 수 있는데
        - 둘 다 비슷한 기능을 한다고 하지만 @Validated 는 유효성 검사 대상을 그룹으로 묶어서 적용 가능
    - AOP 와 더불어 사용하면 아주아주 효율적일듯
        - 컨트롤러나 비지니스 로직을 구현하게되는 서비스 레이어에서 보통 검증 로직을 포함 하게 되는데, 이를 AOP 를 통하여 깔끔하게 관리 할 수 있어서 좋아보임
        - 물론, 모델에 대한 검증은 모델에서 하는 것이 맞다고 생각함
        - 하지만, 그렇지 못하는 경우(다 뜯어고쳐야 한다던가...) AOP 를 통해 HTTP 요청이 들어와 컨트롤러의 파라미터가 인스턴스화될 때 검증 로직이 동작한다면 실제로 컨트롤러의 메서드를 타기 전에 파라미터 초기화 단계에서 요청 파라미터의 검증을 할 수 있다는 장점이 있음
        - 즉, 파라미터 검증에 대한 시점을 변경하여 클-린한 코드를 만드는 것
        - 그런 의미로 스프링의 validation API 들은 AOP 와 사용해야 효과가 두 배가 된다고 생각함
- 자바의 meta-inf
    - jar 패키징에 사용됨
    - 매니페스트 파일을 저장
        - 프로젝트의 스펙이나 설정 등 중요한 내용들을 가지고 있는 사용 설명서같은 녀석이라고 생각하면 됨
- 자바의 web-inf
    - 웹 상에서 직접 접근하여 확인하면 안되는 파일을 저장하는 폴더라고 함
- 엔티티 매니저란
    - 개발자 관점에서 보자면 엔티티라는 객체를 저장하는 가상의 데이터베이스
    - 보통 엔티티에 대한 CRUD 작업 등을 할 때 마다 엔티티 매니저 팩토리에서 엔티티 매니저를 생성해줌
    - 엔티티 매니저 내부의 데이터 소스를 통한 커넥션풀을 통해 동작함
        - 커넥션과 아주 밀접한 객체이기때문에 스레드간 공유하여 사용하면 절대 안됨
- 엔티티 매니저 팩토리는
    - 싱글톤으로 동작
    - 엔티티 매니저를 관리하는 큰 컨테이너
    - 스레드 안정성 보장
- 영속성 컨텍스트란
    - 엔티티를 영구 저장하는 환경!
    - 엔티티 매니저 팩토리를 통해 생성된 엔티티 매니저가 엔티티를 영속성 컨텍스트에 저장
    - 논리적인 개념으로만 존재하기 때문에 실체가 없음
    - 보통 한 개의 엔티티 매니저를 만들 때 한 개가 만들어지나 다른 매니저에서 같은 컨텍스트에 접근하는 것도 가능하다고 함
- 엔티티 생명 주기
    - 비영속
        - 엔티티라는 객체만 존재하는 상태
    - 영속
        - 엔티티가 영속성 컨텍스트에 의해 관리되는 상태
    - 준영속
        - 컨텍스트에 의해 관리되던 엔티티가 더이상 관리받지 않는 상태
        - 이 상태는 변경해도 영속 상태로 돌아가거나 하지는 않는다고함
    - 삭제
        - 말 그래도 영속성 컨텍스트와 데이터베이스 둘 다에서 삭제된 상태