# 2023.09.05

- [x] 오늘 하루 공부했던 것에 대해 `정리하기`
- [x] 중요한 것을 `잊지않기`

# 🚩 Today I Learned

---

## 📚 정리하기

- 인프런 스프링 핵심 원리-고급편 수강
  - 완강!

---

## 🏷 잊지않기

- 스프링 AOP 의 한계
  - 프록시가 적용되는 메서드가 해당 클래스의 내부 메서드를 호출하게 된다면 AOP 가 적용되지 않는다
  - AOP 가 적용되는 메서드를 호출할 때에는 프록시 객체가 호출되지만, 이 객체는 결국 대상 객체를 실제로 호출해야 하며, 실제 객체가 내부 메서드를 호출하기 때문에…
  - 이 경우 내부 호출을 위해 `ApplicationContext` 나 `ObjectProvidor` 같은 걸로 자신에 대한 프록시를 가져와 프록시를 통해 내부 메서드를 호출하는 방법을 사용할 수도 있다
    - 권장하진 않지만 최후의 방법으로 setter 주입을 통해 자기 자신에 대한 프록시를 지닐 수 있다
    - 스프링 부트 2.6 부터는 기본적으로 순환 참조가 발생할 때 예외가 발생하기 때문에 꼭 setter 주입을 통해 자기 자신에 대한 프록시를 주입 받게 된다면 순환 참조를 허용하는 옵션을 설정해주어야 한다
  - 다만, 내부 호출 문제에 대해 스프링이 가장 권장하는 방법은 **내부 호출을 하지 않도록 클래스를 분리하는 것**이라고 한다
- JDK Dynamic Proxy 의 다양한 한계들
  - 프록시를 대상의 구체 클래스로 캐스팅할 수 없다
  - 프록시 대상 타겟의 구체 클래스를 주입받을 수 없다
  - 이 한계들은 대부분 CGLib 를 통해 프록시를 생성하면 해결 된다
  - 수 많은 노력 끝에 스프링 부트 2.0 부터 CGLib 가 기본 프록시 생성 라이브러리로 채택 되었다
