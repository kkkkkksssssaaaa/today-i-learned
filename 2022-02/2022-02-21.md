# 2022.02.21

- [x]  오늘 하루 공부했던 것에 대해 `정리하기`
- [x]  중요한 것을 `잊지않기`

# 🚩 Today I Learned

---

## 📚 정리하기

- JPA 프로그래밍 요약 정리

---

## 🏷 잊지않기

- 스프링 데이터 JPA 에서는 HTTP Request 로 받은 식별자를 통해 해당하는 엔티티를 찾아 컨트롤러에서 바로 엔티티를 사용할 수 있게끔 하는 옵션을 제공
    - Configuration 클래스에서 어노테이션으로 아주 간단하게 사용할 수 있음
- JPA 의 save() 는 식별자가 null 이거나, 자바 기본  타입을 사용하는 경우 식별자가 0인 경우에는 새로운 엔티티를 저장하는 것으로 판단하여 EntityManager.persist() 를 호출한다고함
    - 만약, 기존의 엔티티를 수정하는 경우에는 EntityManager.merge() 를 호출함
- JPA 쿼리 메소드는 락도 걸 수 있음
- 스프링 데이터 JPA 에서 제공하는 `@Repository` 어노테이션을 선언함에 따라 JPA 에서 발생하는 예외는 모두 스프링에서 추상화시킨 예외로 변환되어 던져진다고함
    - JPQL 에서는 findOne 을 했을 때 결과가 없다면 예외를 반환하지만, 스프링 데이터 JPA 에서는 이를 무시하고 null 로 반환한다고함
- JPA Criteria 로 사용할 수 있는 개념인 명세와 술어는 Specification, Predicate
    - Specificate 는 말 그대로 스프링 데이터 JPA 를 사용할 때 조건 절에 조건을 명세할 수 있고, 그 제약 조건 하나 하나를 참/거짓으로 나타내는 술어로써 표현할 수 있음
    - Specification 인터페이스를 구현하여 명세를 직접 구현할 수 있음
    - QueryDSL 의 메서드 위임처럼 static 으로 메서드를 만들어 사용할 수 있음
- Pageable 을 사용할 때 페이징 파라미터를 1부터 시작하고 싶다면 별도의 리졸버 빈을 수동으로 등록 후, 해당 옵션 값을  true 로 변경해주면 손쉽게 1부터 시작할 수 있다고함
- JPA 에서 읽기 전용 트랜잭션을 사용하면 약간의 성능 향상을 얻을 수도 있다고함