# 2022.05.09

- [x]  오늘 하루 공부했던 것에 대해 `정리하기`
- [x]  중요한 것을 `잊지않기`

# 🚩 Today I Learned

---

## 📚 정리하기

- 오브젝트 요약 정리 및 예제 코드 작성

---

## 🏷 잊지않기

- 커넥션 풀이란?
    - 기존의 레거시한 데이터베이스 커넥션 환경에서는 일일이 Connection 클래스를 생성하여 커넥션을 열고 닫는 것을 수동으로 했어야 했다
        - 이는 성능 오버헤드가 으마으마함
        - 실제로 사용하봤을 때에도 코드도 깔끔하지 않고, try-catch-finally 가 거의 강제 되었던것 같음 ㅠㅠ
            - 물론, 내가 뭣모르고 막 코딩할 때이기는 하나, 지금 와서 그 스펙으로 다시 뭔가 만든다고 해도 코드를 깔끔하게 유지할 자신이 읍땅
    - 하지만, 지정된 갯수만큼의 커넥션을 미리 확보해 놓은 후, 개발자가 커넥션을 신경쓰지 않도록 해주는 것이 바로 커넥션 풀
    - 스프링부트 2.0 버전 이상에서는 커넥션 풀 소프트웨어로 히카리 커넥션 풀을 기본적으로 사용함!
- JPA 를 사용하는데, 여기서 식별자 생성 정책이 자동 생성이거나 시퀀스 정책인 경우, 한 번의 데이터 insert 에 필요한 커넥션은 최소 두 개가 됨......
    - 식별자 생성할 때 하나, 본 데이터 넣을 때 하나...!
        - 커넥션은 기본적으로 한 개의 커넥션에 한 개의 명령을 수행하는 것으로 알고 있었는데, 진짠가보다 싶었다...
    - 이와 관련한 내용을 우아한 형제들 기술 블로그에서 잘 써주셨는데, 정말 도움이 많이 됐다!
        - 해당 게시글은 스레드 데드락에 관련된 이슈였지만, 이슈 원인이 스레드 개수와 커넥션 풀이 가지는 커넥션 개수와 연관이 있었던 이슈였당
        - 정말 유익하다 👍👍👍👍👍
        - [https://techblog.woowahan.com/2664/](https://techblog.woowahan.com/2664/)